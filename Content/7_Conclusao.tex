\chapter{Conclusão}
\label{Conclusao}

\par Nesta monografia foi apresentado o projeto SOFIA, um emulador Arduino criado para Android.

\par Pode-se dizer que o sistema desenvolvido atende aos objetivos propostos mesmo ainda sendo uma versão parcial: o sistema é capaz de executar códigos escritos para o Arduino UNO (ATmega328P) diretamente no dispositivo Android, bem como permitir que o usuário interaja com o sistema por meio de sinais de entrada (digital e analógica) ou fazendo medições dos estados dos pinos digitais. O usuário também tem a disposição uma IDE modificada que o permite escrever códigos e transferi-los para o simulador facilmente.

\par Entre as limitações do sistema, destaca-se sua performance em termos de velocidade de simulação. A execução de códigos provindos da IDE ainda é lenta devido a quantidade de instruções \textit{assembly} geradas pelo compilador e a capacidade de processamento do \textit{smartphone}. Para o desenvolvimento, foi utilizado um \textit{smartphone} ASUS ZenFone 2, com 4 núcleos de processamento (2,33GHz), 4GB de memória principal, 32GB de armazenamento, executando o Android 5.0, e frequência de \textit{clock} efetiva observada neste sistema foi de aproximadamente 200Hz para o projeto \textit{Blink} (uma redução de 80.000 vezes a velocidade do sistema real). Ainda assim, é possível utilizar o sistema para pequenos projetos (utilizando escalas de tempo reduzidas), o que ainda o torna útil para aplicações didáticas.

\par Em termos de arquitetura, o sistema buscou preservar os mesmos módulos e fluxos de comunicação existentes no \textit{hardware} do microcontrolador, por motivos, principalmente, de facilidade de implementação e desempenho, o que acabou tornando a arquitetura do \textit{software} um pouco mais complexa. No entanto, o sistema ainda está modular, o que é uma característica importante para sua expansão.

\par Quanto à qualidade do sistema, a análise estática do SonarQube não revelou grandes problemas no código e os principais módulos foram quase que totalmente cobertos por teste. Ainda é necessária a criação de muitos casos de teste para cobrir todo o projeto e garantir um nível maior de qualidade, estes estão sendo desenvolvidos em ordem de prioridade para os demais módulos.

\par Para a continuidade do projeto, deseja-se incluir nas próximas versões:

\begin{itemize}
	\item \textbf{Instrumentos de medição:} Permitir que o usuário obtenha informações a respeito de frequência de oscilação, \textit{duty cycle}, etc. nos pinos de saída.
	
	\item \textbf{Visualização da memória:} Apresentar ao usuário o estado dos registradores e da memória externa em tempo real de simulação.
	
	\item \textbf{Criação de novos módulos:} Vários módulos e funcionalidades do ATmega328P ainda não foram adicionados e devem ser incluídos para as próximas versões, tais como comparador analógico, memória EEPROM, etc.
	
	\item \textbf{Comunicação serial:} Entre os módulos não implementados, a USART é um dos principais e deve ser o primeiro a ser trabalhado. Espera-se também utilizar o monitor serial da própria IDE do Arduino (assim como ocorre nos sistema real) de modo a facilitar seu uso.
\end{itemize}

\par Além disso, serão estudadas maneiras de aumentar o desempenho da simulação, seja por meio de alterações internas no sistema ou com otimizações externas. 

\newpage
\subsection{Cronograma de Atividades}

\par A tabela~\ref{tab:cronograma} apresenta o cronograma executado até o momento em relação ao planejado.

\begin{table}[h]
	\centering
	\caption{Cronograma}
	\label{tab:cronograma}
	\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}
		\hline
		& 03/18 & 04/18 & 05/18 & 06/18 & 07/18 & 08/18 & 09/18 & 10/18 & 11/18 & 12/18 \\ \hline
		\multirow{2}{*}{01} & \cellcolor{blue!25} & \cellcolor{blue!25} &  &  &  &  &  &  &  &  \\ \hhline{|~|----------} 
		& \cellcolor{green!25} & \cellcolor{green!25} & \cellcolor{green!25} &  &  &  &  &  &  &  \\ \hline
		\multirow{2}{*}{02} &  & \cellcolor{blue!25} &  &  &  &  &  &  &  &  \\ \hhline{|~|----------} 
		& \cellcolor{green!25} &  &  &  &  &  &  &  &  &  \\ \hline
		\multirow{2}{*}{03} &  & \cellcolor{blue!25} & \cellcolor{blue!25} &  &  &  &  &  &  &  \\ \hhline{|~|----------}  
		& \cellcolor{green!25} & \cellcolor{green!25} & \cellcolor{green!25} &  &  &  &  &  &  &  \\ \hline
		\multirow{2}{*}{04} &  &  & \cellcolor{blue!25} & \cellcolor{blue!25} &  &  &  &  &  &  \\ \hhline{|~|----------}  
		& \cellcolor{green!25} & \cellcolor{green!25} & \cellcolor{green!25} &  &  &  &  &  &  &  \\ \hline
		\multirow{2}{*}{05} &  &  &  &  & \cellcolor{blue!25} &  &  &  &  &  \\ \hhline{|~|----------}  
		&  & \cellcolor{green!25} &  &  &  &  &  &  &  &  \\ \hline
		\multirow{2}{*}{06} &  &  &  &  &  & \cellcolor{blue!25} & \cellcolor{blue!25} &  &  &  \\ \hhline{|~|----------}  
		&  & \cellcolor{green!25} &  &  &  &  &  &  &  &  \\ \hline
		\multirow{2}{*}{07} &  &  &  &  &  &  & \cellcolor{blue!25} & \cellcolor{blue!25} &  &  \\ \hhline{|~|----------}  
		&  & \cellcolor{green!25} & \cellcolor{green!25} &  &  &  &  &  &  &  \\ \hline
		\multirow{2}{*}{08} &  & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} &  \\ \hhline{|~|----------}  
		&  & \cellcolor{green!25} & \cellcolor{green!25} & \cellcolor{green!25} &  &  &  &  &  &  \\ \hline
		\multirow{2}{*}{09} &  & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} & \cellcolor{blue!25} &  \\ \hhline{|~|----------}  
		& \cellcolor{green!25} &  & \cellcolor{green!25} &  &  &  &  &  &  &  \\ \hline
		\cellcolor{blue!25} & \multicolumn{10}{l|}{Planejado}      \\ \hline
		\cellcolor{green!25} & \multicolumn{10}{l|}{Executado}      \\ \hline
	\end{tabular}
\end{table}

\begin{enumerate}
	\item Alteração do código fonte da IDE oficial do Arduino e integração com o simulador.
	\item Planejamento do sistema como um todo, incluindo a definição dos elementos de interface, estrutura de classes, arquitetura e demais itens relacionados à organização interna do sistema;
	\item Decodificação do arquivo hexadecimal gerado pelo compilador e execução das instruções \textit{assembly};
	\item Desenvolvimento do módulo de entrada e saída digital;
	\item Detecção e tratamento de interrupções;
	\item Desenvolvimento do módulo de \textit{timer} (8 e 16 bits);
	\item Desenvolvimento do módulo ADC (\textit{Analog to Digital Converter});
	\item Escrita da monografia (parcial);
	\item Testes e validações
\end{enumerate}

%\section*{Trabalhos futuros}
%
%Isso é para a Monografia Final de defesa.....











